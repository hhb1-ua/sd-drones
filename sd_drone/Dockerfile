FROM python:3.11.2
ARG DRONE_IDENTIFIER
ARG DRONE_ALIAS
ARG ENGINE_ADRESS
ARG BROKER_ADRESS
# RUN echo $DRONE_IDENTIFIER
# RUN echo $DRONE_ALIAS
# RUN echo $ENGINE_ADRESS
# RUN echo $BROKER_ADRESS
ENV DRONE_IDENTIFIER ${DRONE_IDENTIFIER}
ENV DRONE_ALIAS ${DRONE_ALIAS}
ENV ENGINE_ADRESS ${ENGINE_ADRESS}
ENV BROKER_ADRESS ${BROKER_ADRESS}
WORKDIR /app
COPY requirements.txt requirements.txt
RUN pip install -r requirements.txt
COPY . .

CMD python3 -u sd_drone.py $DRONE_IDENTIFIER $DRONE_ALIAS $ENGINE_ADRESS $BROKER_ADRESS
